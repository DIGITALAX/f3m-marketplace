{"ast":null,"code":"var _jsxFileName = \"/Volumes/Data/Work/Digitalax/f3m-marketplace/src/components/image-card/index.js\";\nvar __jsx = React.createElement;\nimport { openBuynowModal, openConnectMetamaskModal, openPlaceBidModal, openSwitchNetworkModal } from \"@actions/modals.actions\";\nimport NewButton from \"@components/buttons/newbutton\";\nimport Link from \"next/link\";\nimport { getAccount } from \"@selectors/user.selectors\";\nimport LazyLoad from \"react-lazyload\";\nimport { useRouter } from \"next/router\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getRarityId, reviseUrl } from \"@utils/helpers\";\nimport { getChainId } from \"@selectors/global.selectors\";\nimport Button from \"@components/buttons/button\";\nimport styles from \"./styles.module.scss\";\n\nconst ImageCard = ({\n  mainImage,\n  mainImageType,\n  data,\n  showDesigner = false,\n  showCollectionName = false,\n  showRarity = false,\n  showButton = true,\n  keepRatio = false,\n  imgUrl = null,\n  offerCount = null,\n  reservePrice = null,\n  price,\n  disable = false,\n  withLink = false,\n  imgLink = null,\n  isAuction = false,\n  v1 = false,\n  borderType = \"blue\"\n}) => {\n  var _data$model, _data$model2, _data$model3;\n\n  const router = useRouter();\n  const account = useSelector(getAccount);\n  const chainId = useSelector(getChainId);\n  const {\n    asPath\n  } = router;\n  const dispatch = useDispatch();\n  const {\n    0: zoomMedia,\n    1: setZoomMedia\n  } = useState(false);\n  const videoTagRef = useRef();\n  const {\n    0: hasAudio,\n    1: setHasAudio\n  } = useState(false);\n  const {\n    0: videoMuted,\n    1: setVideoMuted\n  } = useState(true);\n  const {\n    0: defaultMainImage,\n    1: setDefaultMainImage\n  } = useState(mainImage);\n  const {\n    0: defaultMainImageType,\n    1: setDefaultMainImageType\n  } = useState(mainImageType);\n\n  function getAudio(video) {\n    return video.mozHasAudio || Boolean(video.webkitAudioDecodedByteCount) || Boolean(video.audioTracks && video.audioTracks.length);\n  }\n\n  const onBuyNow = () => {\n    if (!router.asPath.includes(\"product\")) {\n      console.log(\"router.asPath: \", router.asPath);\n      router.push(`/product/${v1 ? `v1-${data === null || data === void 0 ? void 0 : data.id}` : data === null || data === void 0 ? void 0 : data.id}/${getRarityId(data.rarity)}/${isAuction ? 1 : 0}`).then(() => window.scrollTo(0, 0));\n    } else {\n      if (account) {\n        if (chainId === \"0x89\") {\n          if (!isAuction) {\n            dispatch(openBuynowModal({\n              id: data.id,\n              priceEth: price\n            }));\n          } else {\n            dispatch(openPlaceBidModal({\n              id: data.id,\n              priceEth: price\n            }));\n          }\n        } else {\n          dispatch(openSwitchNetworkModal());\n        }\n      } else {\n        dispatch(openConnectMetamaskModal());\n      }\n    }\n  };\n\n  const onClickZoomOut = () => {\n    setZoomMedia(true);\n  };\n\n  const onClickZoomIn = () => {\n    setZoomMedia(false);\n  };\n\n  useEffect(() => {\n    if (!mainImage) {\n      var _data$garment, _data$garment2, _data$garment3, _data$garment4;\n\n      setDefaultMainImage((data === null || data === void 0 ? void 0 : (_data$garment = data.garment) === null || _data$garment === void 0 ? void 0 : _data$garment.animation) || (data === null || data === void 0 ? void 0 : data.animation) || (data === null || data === void 0 ? void 0 : (_data$garment2 = data.garment) === null || _data$garment2 === void 0 ? void 0 : _data$garment2.image) || (data === null || data === void 0 ? void 0 : data.image));\n      if (data !== null && data !== void 0 && (_data$garment3 = data.garment) !== null && _data$garment3 !== void 0 && _data$garment3.animation || data !== null && data !== void 0 && data.animation) setDefaultMainImageType(1);else if (data !== null && data !== void 0 && (_data$garment4 = data.garment) !== null && _data$garment4 !== void 0 && _data$garment4.image || data !== null && data !== void 0 && data.image) setDefaultMainImageType(2);\n    }\n  }, [data]);\n\n  const onClickMute = () => {\n    videoTagRef.current.pause();\n    setVideoMuted(!videoMuted);\n    videoTagRef.current.play();\n  };\n\n  useEffect(() => {\n    if (mainImageType === 1 && videoTagRef.current) {\n      videoTagRef.current.load();\n    }\n  }, [mainImageType, mainImage]);\n\n  const renderImage = () => {\n    var _data$garment5;\n\n    return __jsx(\"div\", {\n      className: [styles.bodyWrapper, borderType === \"blue\" ? styles.blue : \"\", borderType === \"none\" ? styles.none : \"\"].join(\" \"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }\n    }, showRarity ? __jsx(\"div\", {\n      className: styles.rarity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }, \" \", (data === null || data === void 0 ? void 0 : data.rarity) || (data === null || data === void 0 ? void 0 : (_data$garment5 = data.garment) === null || _data$garment5 === void 0 ? void 0 : _data$garment5.rarity), \" \") : null, data ? __jsx(\"div\", {\n      className: [zoomMedia ? styles.zoomWrapper : styles.mediaWrapper, keepRatio ? styles.keepRatio : ''].join(' '),\n      onClick: () => onClickZoomIn(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, (mainImageType || defaultMainImageType) === 1 ? __jsx(LazyLoad, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, __jsx(\"video\", {\n      key: data.id,\n      autoPlay: true,\n      muted: videoMuted,\n      loop: true,\n      className: styles.video,\n      ref: videoTagRef,\n      preload: \"auto\",\n      onLoadedData: () => {\n        if (!asPath.includes(\"product\")) return; // console.log('videoTagRef: ', videoTagRef.current)\n\n        var video = videoTagRef.current; // console.log('video: ', video)\n\n        if (getAudio(video)) {\n          // console.log('video has audio')\n          setHasAudio(true);\n        } else {\n          setHasAudio(false); // console.log(`video doesn't have audio`)\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, __jsx(\"source\", {\n      src: reviseUrl(mainImage || defaultMainImage),\n      type: \"video/mp4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }))) : mainImageType === 2 || defaultMainImageType === 2 ? __jsx(\"img\", {\n      src: reviseUrl(mainImage || defaultMainImage),\n      className: styles.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }) : null, hasAudio && zoomMedia && asPath.includes(\"product/\") && __jsx(Button, {\n      className: styles.muteButton,\n      onClick: e => {\n        e.stopPropagation();\n        onClickMute();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, videoMuted ? __jsx(\"img\", {\n      src: \"/images/audio-off.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 19\n      }\n    }) : __jsx(\"img\", {\n      src: \"/images/audio-on.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 19\n      }\n    }))) : null, asPath.includes(\"product/\") && __jsx(Button, {\n      className: styles.zoomButton,\n      onClick: () => onClickZoomOut(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }\n    }, __jsx(\"img\", {\n      src: \"/images/zoom_btn.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    })), hasAudio && (mainImageType === 1 || defaultMainImageType === 1) && __jsx(Button, {\n      className: styles.muteButton,\n      onClick: () => onClickMute(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }\n    }, videoMuted ? __jsx(\"img\", {\n      src: \"/images/audio-off.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }) : __jsx(\"img\", {\n      src: \"/images/audio-on.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 15\n      }\n    })), !!reservePrice && __jsx(\"div\", {\n      className: styles.reservePrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, reservePrice), __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, \" Reserve Price \")), imgUrl ? __jsx(\"img\", {\n      src: reviseUrl(imgUrl),\n      className: styles.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }) : null, showButton && __jsx(\"div\", {\n      className: styles.buyNow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }, __jsx(NewButton, {\n      text: disable ? \"Sold Out\" : isAuction ? \"Place A Bid\" : \"Buy Now\",\n      onClick: onBuyNow,\n      disable: disable,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    })), !!offerCount && __jsx(\"div\", {\n      className: styles.offerCount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }\n    }, offerCount), \" Offers\"));\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: styles.imageCardWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }\n  }, showCollectionName ? __jsx(\"div\", {\n    className: styles.collectionName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  }, data !== null && data !== void 0 && data.garment ? data.garment.name : data.name) : null, showDesigner ? __jsx(\"a\", {\n    href: `https://models.digitalax.xyz/models/${data === null || data === void 0 ? void 0 : (_data$model = data.model) === null || _data$model === void 0 ? void 0 : _data$model.name}`,\n    target: \"_blank\",\n    className: styles.designerLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: styles.designerWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: data === null || data === void 0 ? void 0 : (_data$model2 = data.model) === null || _data$model2 === void 0 ? void 0 : _data$model2.image,\n    className: styles.photo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, data === null || data === void 0 ? void 0 : (_data$model3 = data.model) === null || _data$model3 === void 0 ? void 0 : _data$model3.name, \" \"))) : null, withLink ? __jsx(Link, {\n    href: imgLink ? imgLink : `/product/${data === null || data === void 0 ? void 0 : data.id}/${getRarityId(data === null || data === void 0 ? void 0 : data.rarity)}/${isAuction ? 1 : 0}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }\n  }, renderImage())) : renderImage()));\n};\n\nexport default ImageCard;","map":{"version":3,"sources":["/Volumes/Data/Work/Digitalax/f3m-marketplace/src/components/image-card/index.js"],"names":["openBuynowModal","openConnectMetamaskModal","openPlaceBidModal","openSwitchNetworkModal","NewButton","Link","getAccount","LazyLoad","useRouter","React","useState","useRef","useEffect","useDispatch","useSelector","getRarityId","reviseUrl","getChainId","Button","styles","ImageCard","mainImage","mainImageType","data","showDesigner","showCollectionName","showRarity","showButton","keepRatio","imgUrl","offerCount","reservePrice","price","disable","withLink","imgLink","isAuction","v1","borderType","router","account","chainId","asPath","dispatch","zoomMedia","setZoomMedia","videoTagRef","hasAudio","setHasAudio","videoMuted","setVideoMuted","defaultMainImage","setDefaultMainImage","defaultMainImageType","setDefaultMainImageType","getAudio","video","mozHasAudio","Boolean","webkitAudioDecodedByteCount","audioTracks","length","onBuyNow","includes","console","log","push","id","rarity","then","window","scrollTo","priceEth","onClickZoomOut","onClickZoomIn","garment","animation","image","onClickMute","current","pause","play","load","renderImage","bodyWrapper","blue","none","join","zoomWrapper","mediaWrapper","muteButton","e","stopPropagation","zoomButton","buyNow","imageCardWrapper","collectionName","name","model","designerLink","designerWrapper","photo"],"mappings":"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","sourcesContent":["import {\n  openBuynowModal,\n  openConnectMetamaskModal,\n  openPlaceBidModal,\n  openSwitchNetworkModal,\n} from \"@actions/modals.actions\";\nimport NewButton from \"@components/buttons/newbutton\";\nimport Link from \"next/link\";\nimport { getAccount } from \"@selectors/user.selectors\";\nimport LazyLoad from \"react-lazyload\";\nimport { useRouter } from \"next/router\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getRarityId, reviseUrl } from \"@utils/helpers\";\nimport { getChainId } from \"@selectors/global.selectors\";\nimport Button from \"@components/buttons/button\";\nimport styles from \"./styles.module.scss\";\n\nconst ImageCard = ({\n  mainImage,\n  mainImageType,\n  data,\n  showDesigner = false,\n  showCollectionName = false,\n  showRarity = false,\n  showButton = true,\n  keepRatio = false,\n  imgUrl = null,\n  offerCount = null,\n  reservePrice = null,\n  price,\n  disable = false,\n  withLink = false,\n  imgLink = null,\n  isAuction = false,\n  v1 = false,\n  borderType = \"blue\",\n}) => {\n  const router = useRouter();\n  const account = useSelector(getAccount);\n  const chainId = useSelector(getChainId);\n  const { asPath } = router;\n  const dispatch = useDispatch();\n  const [zoomMedia, setZoomMedia] = useState(false);\n  const videoTagRef = useRef();\n  const [hasAudio, setHasAudio] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(true);\n  const [defaultMainImage, setDefaultMainImage] = useState(mainImage);\n  const [defaultMainImageType, setDefaultMainImageType] =\n    useState(mainImageType);\n\n  function getAudio(video) {\n    return (\n      video.mozHasAudio ||\n      Boolean(video.webkitAudioDecodedByteCount) ||\n      Boolean(video.audioTracks && video.audioTracks.length)\n    );\n  }\n\n  const onBuyNow = () => {\n    if (!router.asPath.includes(\"product\")) {\n      console.log(\"router.asPath: \", router.asPath);\n      router\n        .push(\n          `/product/${v1 ? `v1-${data?.id}` : data?.id}/${getRarityId(\n            data.rarity\n          )}/${isAuction ? 1 : 0}`\n        )\n        .then(() => window.scrollTo(0, 0));\n    } else {\n      if (account) {\n        if (chainId === \"0x89\") {\n          if (!isAuction) {\n            dispatch(\n              openBuynowModal({\n                id: data.id,\n                priceEth: price,\n              })\n            );\n          } else {\n            dispatch(\n              openPlaceBidModal({\n                id: data.id,\n                priceEth: price,\n              })\n            );\n          }\n        } else {\n          dispatch(openSwitchNetworkModal());\n        }\n      } else {\n        dispatch(openConnectMetamaskModal());\n      }\n    }\n  };\n\n  const onClickZoomOut = () => {\n    setZoomMedia(true);\n  };\n\n  const onClickZoomIn = () => {\n    setZoomMedia(false);\n  };\n\n  useEffect(() => {\n    if (!mainImage) {\n      setDefaultMainImage(\n        data?.garment?.animation ||\n          data?.animation ||\n          data?.garment?.image ||\n          data?.image\n      );\n      if (data?.garment?.animation || data?.animation)\n        setDefaultMainImageType(1);\n      else if (data?.garment?.image || data?.image) setDefaultMainImageType(2);\n    }\n  }, [data]);\n\n  const onClickMute = () => {\n    videoTagRef.current.pause();\n    setVideoMuted(!videoMuted);\n    videoTagRef.current.play();\n  };\n\n  useEffect(() => {\n    if (mainImageType === 1 && videoTagRef.current) {\n      videoTagRef.current.load();\n    }\n  }, [mainImageType, mainImage]);\n\n  const renderImage = () => {\n    return (\n      <div\n        className={[\n          styles.bodyWrapper,\n          borderType === \"blue\" ? styles.blue : \"\",\n          borderType === \"none\" ? styles.none : \"\",\n        ].join(\" \")}\n      >\n        {showRarity ? (\n          <div className={styles.rarity}>\n            {\" \"}\n            {data?.rarity || data?.garment?.rarity}{\" \"}\n          </div>\n        ) : null}\n        {data ? (\n          <div\n            className={[zoomMedia ? styles.zoomWrapper : styles.mediaWrapper, keepRatio ? styles.keepRatio : ''].join(' ')}\n            onClick={() => onClickZoomIn()}\n          >\n            {(mainImageType || defaultMainImageType) === 1 ? (\n              <LazyLoad>\n                {/* <video key={data.id} autoPlay muted={!asPath.includes('product')} loop className={styles.video} */}\n                <video\n                  key={data.id}\n                  autoPlay\n                  muted={videoMuted}\n                  loop\n                  className={styles.video}\n                  ref={videoTagRef}\n                  preload={\"auto\"}\n                  onLoadedData={() => {\n                    if (!asPath.includes(\"product\")) return;\n                    // console.log('videoTagRef: ', videoTagRef.current)\n                    var video = videoTagRef.current;\n                    // console.log('video: ', video)\n                    if (getAudio(video)) {\n                      // console.log('video has audio')\n                      setHasAudio(true);\n                    } else {\n                      setHasAudio(false);\n                      // console.log(`video doesn't have audio`)\n                    }\n                  }}\n                >\n                  <source\n                    src={reviseUrl(mainImage || defaultMainImage)}\n                    type=\"video/mp4\"\n                  />\n                </video>\n              </LazyLoad>\n            ) : mainImageType === 2 || defaultMainImageType === 2 ? (\n              <img\n                src={reviseUrl(mainImage || defaultMainImage)}\n                className={styles.image}\n              />\n            ) : null}\n            {hasAudio && zoomMedia && asPath.includes(\"product/\") && (\n              <Button\n                className={styles.muteButton}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onClickMute();\n                }}\n              >\n                {videoMuted ? (\n                  <img src=\"/images/audio-off.png\" />\n                ) : (\n                  <img src=\"/images/audio-on.png\" />\n                )}\n              </Button>\n            )}\n          </div>\n        ) : null}\n        {asPath.includes(\"product/\") && (\n          <Button\n            className={styles.zoomButton}\n            onClick={() => onClickZoomOut()}\n          >\n            <img src=\"/images/zoom_btn.png\" />\n          </Button>\n        )}\n        {hasAudio && (mainImageType === 1 || defaultMainImageType === 1) && (\n          <Button className={styles.muteButton} onClick={() => onClickMute()}>\n            {videoMuted ? (\n              <img src=\"/images/audio-off.png\" />\n            ) : (\n              <img src=\"/images/audio-on.png\" />\n            )}\n          </Button>\n        )}\n        {!!reservePrice && (\n          <div className={styles.reservePrice}>\n            <span>{reservePrice}</span>\n            <p> Reserve Price </p>\n          </div>\n        )}\n        {imgUrl ? (\n          <img src={reviseUrl(imgUrl)} className={styles.image} />\n        ) : null}\n        {showButton && (\n          <div className={styles.buyNow}>\n            <NewButton\n              text={\n                disable ? \"Sold Out\" : isAuction ? \"Place A Bid\" : \"Buy Now\"\n              }\n              onClick={onBuyNow}\n              disable={disable}\n            />\n          </div>\n        )}\n        {!!offerCount && (\n          <div className={styles.offerCount}>\n            <span>{offerCount}</span> Offers\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <div className={styles.imageCardWrapper}>\n        {showCollectionName ? (\n          <div className={styles.collectionName}>\n            {data?.garment ? data.garment.name : data.name}\n          </div>\n        ) : null}\n        {showDesigner ? (\n          <a\n            href={`https://models.digitalax.xyz/models/${data?.model?.name}`}\n            target=\"_blank\"\n            className={styles.designerLink}\n          >\n            <div className={styles.designerWrapper}>\n              <img src={data?.model?.image} className={styles.photo} />\n              <div className={styles.name}>{data?.model?.name} </div>\n            </div>\n          </a>\n        ) : null}\n        {withLink ? (\n          <Link\n            href={\n              imgLink\n                ? imgLink\n                : `/product/${data?.id}/${getRarityId(data?.rarity)}/${\n                    isAuction ? 1 : 0\n                  }`\n            }\n          >\n            <a>{renderImage()}</a>\n          </Link>\n        ) : (\n          renderImage()\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default ImageCard;\n"]},"metadata":{},"sourceType":"module"}