{"ast":null,"code":"var _jsxFileName = \"/Volumes/Data/Work/Digitalax/f3m-marketplace/src/pages/marketplace/all/[id].js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport styles from \"./index.module.scss\";\nimport PixelLoader from \"@components/pixel-loader\";\nimport Container from \"@components/container\";\nimport { getCollectionGroupById, getDigitalaxMarketplaceV2Offers } from \"@services/api/apiService\";\nimport { useSelector } from \"react-redux\";\nimport { getChainId } from \"@selectors/global.selectors\";\nimport HeroSection from \"@components/hero-section\";\nimport ProductInfoCard from \"@components/product-info-card\";\nimport { filterProducts } from \"@utils/helpers\";\n\nconst Auctions = () => {\n  const route = useRouter();\n  const chainId = useSelector(getChainId);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: collections,\n    1: setCollections\n  } = useState([]);\n  const {\n    0: filter,\n    1: setFilter\n  } = useState(\"\");\n  const {\n    0: sortBy,\n    1: setSortBy\n  } = useState(null);\n  const {\n    id\n  } = route.query;\n  useEffect(() => {\n    const fetchCollectionGroup = async () => {\n      setLoading(true);\n      let colls = [];\n      const {\n        digitalaxModelCollectionGroup\n      } = await getCollectionGroupById(chainId, id); // if (\n      //   !(\n      //     digitalaxModelCollectionGroup.auctions.length === 1 &&\n      //     digitalaxModelCollectionGroup.auctions[0].id === \"0\"\n      //   )\n      // ) {\n      //   digitalaxModelCollectionGroup.auctions.forEach((auction) => {\n      //     aucs.push({\n      //       ...auction,\n      //       topBid: auction.topBid || 0,\n      //       sold: Date.now() > auction.endTime * 1000,\n      //       auction: true,\n      //       rarity: \"Exclusive\",\n      //     });\n      //   });\n      // }\n\n      const {\n        digitalaxModelMarketplaceOffers\n      } = await getDigitalaxMarketplaceV2Offers(chainId);\n\n      if (!(digitalaxModelCollectionGroup.collections.length === 1 && digitalaxModelCollectionGroup.collections[0].id === \"0\")) {\n        digitalaxModelCollectionGroup.collections.forEach(collection => {\n          const foundOfferItem = digitalaxModelMarketplaceOffers.find(offer => offer.id === collection.id);\n          if (!foundOfferItem) return;\n          colls.push({\n            designer: collection.designer,\n            model: collection.model,\n            developer: collection.developer,\n            auction: false,\n            startTime: foundOfferItem.startTime,\n            sold: collection.garments.length === parseInt(foundOfferItem.amountSold),\n            garment: _objectSpread({}, collection.garments[0]),\n            primarySalePrice: foundOfferItem ? foundOfferItem.primarySalePrice : 0,\n            id: collection.id,\n            rarity: collection.rarity\n          });\n        });\n      }\n\n      setCollections(colls);\n      setLoading(false);\n    };\n\n    fetchCollectionGroup();\n  }, []);\n\n  const getLogo = () => {\n    if (id === \"0\") return \"/images/metaverse/amongus-logo1.png\";\n    if (id === \"1\") return \"/images/metaverse/minecraft-logo.png\";\n    if (id === \"3\") return \"/images/metaverse/auctionsLogo.png\";\n    return null;\n  };\n\n  if (loading) {\n    return __jsx(\"div\", {\n      className: styles.wrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: styles.loadingWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, __jsx(PixelLoader, {\n      title: \"loading...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  const filteredProducts = filterProducts([...collections], filter, sortBy) || [];\n  return __jsx(\"div\", {\n    className: styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, __jsx(HeroSection, {\n    width: id === \"0\" ? \"60%\" : \"80%\",\n    title: \"RUNWAY\",\n    subTitle: \"MODELS AND LOOKS\",\n    filter: filter,\n    setFilter: v => setFilter(v),\n    setSortBy: v => setSortBy(v),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }), __jsx(\"section\", {\n    className: styles.productsSection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles.body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, filteredProducts.sort((a, b) => {\n    if (a.sold && !b.sold) return 1;\n    if (!a.sold && b.sold) return -1;\n    return 0;\n  }).sort((a, b) => {\n    if (parseInt(a.startTime) > parseInt(b.startTime)) return -1;\n    if (parseInt(a.startTime) < parseInt(b.startTime)) return 1;\n    return 0;\n  }).map((prod, index) => {\n    return __jsx(ProductInfoCard, {\n      key: prod.id,\n      isLook: id === \"15\",\n      product: filteredProducts[index],\n      price: filteredProducts[index].auction ? filteredProducts[index].topBid : filteredProducts[index].primarySalePrice,\n      showRarity: true,\n      showCollectionName: true,\n      sold: prod.sold,\n      isAuction: prod.auction,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }\n    });\n  })))));\n};\n\nexport default Auctions;","map":{"version":3,"sources":["/Volumes/Data/Work/Digitalax/f3m-marketplace/src/pages/marketplace/all/[id].js"],"names":["React","useEffect","useState","useRouter","styles","PixelLoader","Container","getCollectionGroupById","getDigitalaxMarketplaceV2Offers","useSelector","getChainId","HeroSection","ProductInfoCard","filterProducts","Auctions","route","chainId","loading","setLoading","collections","setCollections","filter","setFilter","sortBy","setSortBy","id","query","fetchCollectionGroup","colls","digitalaxModelCollectionGroup","digitalaxModelMarketplaceOffers","length","forEach","collection","foundOfferItem","find","offer","push","designer","model","developer","auction","startTime","sold","garments","parseInt","amountSold","garment","primarySalePrice","rarity","getLogo","wrapper","loadingWrapper","filteredProducts","v","productsSection","body","sort","a","b","map","prod","index","topBid"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport styles from \"./index.module.scss\";\nimport PixelLoader from \"@components/pixel-loader\";\nimport Container from \"@components/container\";\nimport {\n  getCollectionGroupById,\n  getDigitalaxMarketplaceV2Offers,\n} from \"@services/api/apiService\";\nimport { useSelector } from \"react-redux\";\nimport { getChainId } from \"@selectors/global.selectors\";\nimport HeroSection from \"@components/hero-section\";\nimport ProductInfoCard from \"@components/product-info-card\";\nimport { filterProducts } from \"@utils/helpers\";\n\nconst Auctions = () => {\n  const route = useRouter();\n  const chainId = useSelector(getChainId);\n  const [loading, setLoading] = useState(true);\n  const [collections, setCollections] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [sortBy, setSortBy] = useState(null);\n  const { id } = route.query;\n\n  useEffect(() => {\n    const fetchCollectionGroup = async () => {\n      setLoading(true);\n      let colls = [];\n      const { digitalaxModelCollectionGroup } = await getCollectionGroupById(\n        chainId,\n        id\n      );\n      // if (\n      //   !(\n      //     digitalaxModelCollectionGroup.auctions.length === 1 &&\n      //     digitalaxModelCollectionGroup.auctions[0].id === \"0\"\n      //   )\n      // ) {\n      //   digitalaxModelCollectionGroup.auctions.forEach((auction) => {\n      //     aucs.push({\n      //       ...auction,\n      //       topBid: auction.topBid || 0,\n      //       sold: Date.now() > auction.endTime * 1000,\n      //       auction: true,\n      //       rarity: \"Exclusive\",\n      //     });\n      //   });\n      // }\n\n      const { digitalaxModelMarketplaceOffers } =\n        await getDigitalaxMarketplaceV2Offers(chainId);\n      if (\n        !(\n          digitalaxModelCollectionGroup.collections.length === 1 &&\n          digitalaxModelCollectionGroup.collections[0].id === \"0\"\n        )\n      ) {\n        digitalaxModelCollectionGroup.collections.forEach((collection) => {\n          const foundOfferItem = digitalaxModelMarketplaceOffers.find(\n            (offer) => offer.id === collection.id\n          );\n          if (!foundOfferItem) return;\n          colls.push({\n            designer: collection.designer,\n            model: collection.model,\n            developer: collection.developer,\n            auction: false,\n            startTime: foundOfferItem.startTime,\n            sold:\n              collection.garments.length ===\n              parseInt(foundOfferItem.amountSold),\n            garment: {\n              ...collection.garments[0],\n            },\n            primarySalePrice: foundOfferItem\n              ? foundOfferItem.primarySalePrice\n              : 0,\n            id: collection.id,\n            rarity: collection.rarity,\n          });\n        });\n      }\n\n      setCollections(colls);\n      setLoading(false);\n    };\n\n    fetchCollectionGroup();\n  }, []);\n\n  const getLogo = () => {\n    if (id === \"0\") return \"/images/metaverse/amongus-logo1.png\";\n    if (id === \"1\") return \"/images/metaverse/minecraft-logo.png\";\n    if (id === \"3\") return \"/images/metaverse/auctionsLogo.png\";\n    return null;\n  };\n\n  if (loading) {\n    return (\n      <div className={styles.wrapper}>\n        <div className={styles.loadingWrapper}>\n          <PixelLoader title={\"loading...\"} />\n        </div>\n      </div>\n    );\n  }\n\n  const filteredProducts =\n    filterProducts([...collections], filter, sortBy) || [];\n\n  return (\n    <div className={styles.wrapper}>\n      <HeroSection\n        width={id === \"0\" ? \"60%\" : \"80%\"}\n        title=\"RUNWAY\"\n        subTitle=\"MODELS AND LOOKS\"\n        filter={filter}\n        setFilter={(v) => setFilter(v)}\n        setSortBy={(v) => setSortBy(v)}\n      />\n\n      <section className={styles.productsSection}>\n        <Container>\n          <div className={styles.body}>\n            {filteredProducts\n              .sort((a, b) => {\n                if (a.sold && !b.sold) return 1;\n                if (!a.sold && b.sold) return -1;\n                return 0;\n              })\n              .sort((a, b) => {\n                if (parseInt(a.startTime) > parseInt(b.startTime)) return -1;\n                if (parseInt(a.startTime) < parseInt(b.startTime)) return 1;\n                return 0;\n              })\n              .map((prod, index) => {\n                return (\n                  <ProductInfoCard\n                    key={prod.id}\n                    isLook={id === \"15\"}\n                    product={filteredProducts[index]}\n                    price={\n                      filteredProducts[index].auction\n                        ? filteredProducts[index].topBid\n                        : filteredProducts[index].primarySalePrice\n                    }\n                    showRarity\n                    showCollectionName\n                    sold={prod.sold}\n                    isAuction={prod.auction}\n                  />\n                );\n              })}\n          </div>\n        </Container>\n      </section>\n    </div>\n  );\n};\n\nexport default Auctions;\n"]},"metadata":{},"sourceType":"module"}