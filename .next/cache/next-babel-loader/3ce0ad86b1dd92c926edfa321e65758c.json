{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Volumes/Data/Work/Digitalax/f3m-marketplace/src/pages/index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { Router } from \"next/router\";\nimport Head from \"next/head\";\nimport { getAllNFTs, getCollectionGroups, getDigitalaxMarketplaceV2Offers, getNFTById, getSecondaryOrderByContractTokenAndBuyorsell, getSellingNfts } from \"@services/api/apiService\";\nimport PixelLoader from \"@components/pixel-loader\";\nimport styles from \"./styles.module.scss\";\nimport { useSelector } from \"react-redux\";\nimport { getChainId } from \"@selectors/global.selectors\";\nimport Container from \"@components/container\";\nimport Link from \"next/link\";\nimport ProductInfoCard from \"@components/product-info-card\";\nimport Filters from \"@components/filters\";\nimport { filterOrders, filterProducts } from \"@utils/helpers\";\nimport digitalaxApi from \"@services/api/espa/api.service\";\nimport { getEnabledNetworkByChainId } from \"@services/network.service\";\nimport config from \"@utils/config\";\nimport SecondaryInfoCard from \"@components/secondary-info-card\";\n\nconst LandingPage = () => {\n  _s();\n\n  const chainId = useSelector(getChainId);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  const {\n    0: filter,\n    1: setFilter\n  } = useState(\"\");\n  const {\n    0: secondaryOrders,\n    1: setSecondaryOrders\n  } = useState([]);\n  const {\n    0: sortBy,\n    1: setSortBy\n  } = useState(null);\n  const {\n    0: marketplace,\n    1: setMarketplace\n  } = useState(1);\n  const {\n    0: lookIds,\n    1: setLookIds\n  } = useState([]);\n  useEffect(() => {\n    import(\"react-facebook-pixel\").then(x => x.default).then(ReactPixel => {\n      ReactPixel.init(\"485692459240447\");\n      ReactPixel.pageView();\n      Router.events.on(\"routeChangeComplete\", () => {\n        ReactPixel.pageView();\n      });\n    });\n  }, []);\n\n  const shuffle = array => {\n    var currentIndex = array.length,\n        randomIndex; // While there remain elements to shuffle...\n\n    while (currentIndex != 0) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex--; // And swap it with the current element.\n\n      [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];\n    }\n\n    return array;\n  };\n\n  const getOwners = (garments, itemSold, users) => {\n    if (!garments) return [];\n    const owners = garments.slice(0, itemSold).map(garment => garment.owner.toLowerCase());\n    const arranged = [...new Set(owners)];\n    return arranged.map(garment => {\n      const user = users.find(item => item.wallet && item.wallet.toLowerCase() == garment) || {};\n      return _objectSpread(_objectSpread({}, garment), user);\n    });\n  };\n\n  useEffect(() => {\n    const fetchCollectionGroups = async () => {\n      setLoading(true);\n      const {\n        digitalaxModelCollectionGroups\n      } = await getCollectionGroups(chainId);\n      const {\n        digitalaxModelMarketplaceOffers\n      } = await getDigitalaxMarketplaceV2Offers(chainId);\n      const users = await digitalaxApi.getAllUsersName();\n      const network = getEnabledNetworkByChainId(chainId);\n      const {\n        nfts\n      } = await getAllNFTs(config.NIX_URL[network.alias]);\n      const {\n        orders: ords\n      } = await getSellingNfts(config.NIX_URL[network.alias]);\n      setSecondaryOrders(filterOrders(ords));\n      const prods = [];\n      console.log({\n        digitalaxModelCollectionGroups\n      });\n      digitalaxModelCollectionGroups.forEach(collectionGroup => {\n        // if (\n        //   collectionGroup.auctions.length > 1 ||\n        //   (collectionGroup.auctions.length === 1 &&\n        //     collectionGroup.auctions[0].id !== \"0\")\n        // ) {\n        //   collectionGroup.auctions.forEach((auction) => {\n        //     prods.push({\n        //       id: auction.id,\n        //       designer: auction.designer,\n        //       reservePrice: auction.reservePrice,\n        //       topBid: auction.topBid || 0,\n        //       startTime: auction.startTime,\n        //       endTime: auction.endTime,\n        //       garment: auction.garment,\n        //       sold: Date.now() > auction.endTime * 1000,\n        //       rarity: \"Exclusive\",\n        //       auction: true,\n        //       version: 2,\n        //     });\n        //   });\n        // }\n        // if (\n        //   collectionGroup.collections.length > 1 ||\n        //   (collectionGroup.collections.length === 1 &&\n        //     collectionGroup.collections[0].id !== \"0\")\n        // ) {\n        console.log({\n          collectionGroup\n        });\n\n        if (collectionGroup.collections.length >= 1) {\n          collectionGroup.collections.forEach(collection => {\n            const offer = digitalaxModelMarketplaceOffers.find(offer => offer.id === collection.id);\n            prods.push({\n              id: collection.id,\n              designer: collection.designer,\n              model: collection.model,\n              rarity: collection.rarity,\n              startTime: offer === null || offer === void 0 ? void 0 : offer.startTime,\n              garment: collection.garments[0],\n              owners: getOwners(offer === null || offer === void 0 ? void 0 : offer.garmentCollection.garments, offer === null || offer === void 0 ? void 0 : offer.amountSold, users),\n              primarySalePrice: offer ? offer.primarySalePrice : 0,\n              sold: collection.garments.length === parseInt(offer === null || offer === void 0 ? void 0 : offer.amountSold),\n              auction: false,\n              version: 2\n            });\n          });\n        }\n\n        if (collectionGroup.digiBundle.length > 1 || collectionGroup.digiBundle.length === 1 && collectionGroup.digiBundle[0].id !== \"0\") {\n          collectionGroup.digiBundle.forEach(collection => {\n            const offer = digitalaxModelMarketplaceOffers.find(offer => offer.id === collection.id);\n            prods.push({\n              id: collection.id,\n              designer: collection.designer,\n              startTime: offer === null || offer === void 0 ? void 0 : offer.startTime,\n              primarySalePrice: offer ? offer.primarySalePrice : 0,\n              sold: collection.garments.length === parseInt(offer.amountSold),\n              rarity: collection.rarity,\n              garment: collection.garments[0],\n              owners: getOwners(offer === null || offer === void 0 ? void 0 : offer.garmentCollection.garments, offer === null || offer === void 0 ? void 0 : offer.amountSold, users),\n              auction: false,\n              version: 2\n            });\n          });\n        }\n      });\n      const nftData = [];\n\n      for (let i = 0; i < nfts.length; i += 1) {\n        var _nft$token, _nft$token2, _attributes$find, _designerData$, _designerData$2;\n\n        const nft = nfts[i];\n        const {\n          token\n        } = await getNFTById(\"\".concat(nft === null || nft === void 0 ? void 0 : (_nft$token = nft.token) === null || _nft$token === void 0 ? void 0 : _nft$token.id, \"_\").concat(nft === null || nft === void 0 ? void 0 : nft.tokenId), config.EIP721_URL[network.alias]);\n        if (!token) continue;\n        const {\n          orders\n        } = await getSecondaryOrderByContractTokenAndBuyorsell(config.NIX_URL[network.alias], nft === null || nft === void 0 ? void 0 : (_nft$token2 = nft.token) === null || _nft$token2 === void 0 ? void 0 : _nft$token2.id, [nft === null || nft === void 0 ? void 0 : nft.tokenId], \"Buy\");\n        const attributes = (JSON.parse(token === null || token === void 0 ? void 0 : token.metadata) || {}).attributes;\n        const designer = (_attributes$find = attributes.find(attribute => attribute.trait_type === \"Designer\")) === null || _attributes$find === void 0 ? void 0 : _attributes$find.value;\n        const designerData = (await digitalaxApi.getDesignerById(designer === \"Kodomodachi\" ? \"Mirth\" : designer)) || [];\n        const seller = users.find(user => {\n          var _user$wallet;\n\n          return ((_user$wallet = user.wallet) === null || _user$wallet === void 0 ? void 0 : _user$wallet.toLowerCase()) === (token === null || token === void 0 ? void 0 : token.owner.id);\n        });\n        nftData.push(_objectSpread(_objectSpread({}, nft), {}, {\n          nftData: _objectSpread(_objectSpread({}, token), {}, {\n            designer: {\n              name: (_designerData$ = designerData[0]) === null || _designerData$ === void 0 ? void 0 : _designerData$.designerId,\n              image: (_designerData$2 = designerData[0]) === null || _designerData$2 === void 0 ? void 0 : _designerData$2.image_url\n            }\n          }),\n          user: seller ? seller : {},\n          orders: filterOrders(orders)\n        }));\n      }\n\n      setProducts(shuffle([...prods, ...nftData]));\n      setLoading(false);\n    };\n\n    fetchCollectionGroups();\n  }, []);\n  const structuredData = {\n    \"@context\": \"http://schema.org\",\n    \"@type\": \"Skins Landing page\",\n    title: \"Digitalax - Web3 Fashion Economy\",\n    description: \"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \"\n  };\n\n  const getOrderForNFT = nft => {\n    return secondaryOrders === null || secondaryOrders === void 0 ? void 0 : secondaryOrders.find(order => {\n      return order.token.id === nft.token.id && order.tokenIds[0] === nft.tokenId;\n    });\n  };\n\n  if (loading) {\n    return __jsx(\"div\", {\n      className: styles.wrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: styles.loadingWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }\n    }, __jsx(PixelLoader, {\n      title: \"loading...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  return __jsx(\"div\", {\n    className: styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }\n  }, __jsx(\"meta\", {\n    name: \"description\",\n    content: \"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"og:title\",\n    content: \"Digitalax - Web3 Fashion Economy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"og:description\",\n    content: \"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"og:url\",\n    content: \"https://marketplace.digitalax.xyz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"twitter:card\",\n    content: \"summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"twitter:site\",\n    content: \"@ESPA4play\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"twitter:title\",\n    content: \"Skins Landing page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"twitter:description\",\n    content: \"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }\n  }), __jsx(\"script\", {\n    src: \"https://cdn.rawgit.com/progers/pathseg/master/pathseg.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 9\n    }\n  }), __jsx(\"script\", {\n    type: \"application/ld+json\",\n    dangerouslySetInnerHTML: {\n      __html: JSON.stringify(structuredData)\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  })), __jsx(\"section\", {\n    className: styles.homeHeroSection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles.leftWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 11\n    }\n  }, \"RUNWAY\"), __jsx(\"h2\", {\n    className: styles.subTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, \"MODELS AND LOOKS\")), __jsx(\"div\", {\n    className: styles.actionsWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles.linkWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/marketplace\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    className: styles.heroSectionLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 15\n    }\n  }, \"Primary Marketplace >\")), __jsx(Link, {\n    href: \"/marketplace/secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    className: styles.heroSectionLink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 15\n    }\n  }, \"Secondary Marketplace >\"))), __jsx(\"div\", {\n    className: styles.filtersWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 11\n    }\n  }, __jsx(Filters, {\n    showType: true,\n    setType: value => {\n      setMarketplace(parseInt(value));\n    },\n    filter: filter,\n    filterChange: setFilter,\n    sortByChange: setSortBy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }\n  })))), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }\n  }, __jsx(\"section\", {\n    className: styles.collectionsWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }\n  }, filterProducts(products, filter, sortBy).sort((a, b) => {\n    if (a.sold && !b.sold) return 1;\n    if (!a.sold && b.sold) return -1;\n    return 0;\n  }).map(prod => {\n    if (marketplace === 2 && prod.rarity) return __jsx(React.Fragment, null);\n    if (marketplace === 1 && !prod.rarity) return __jsx(React.Fragment, null);\n\n    if (marketplace === 2) {\n      return __jsx(SecondaryInfoCard, {\n        product: prod,\n        offers: prod.orders,\n        user: prod.user,\n        nftData: prod.nftData,\n        order: getOrderForNFT(prod),\n        key: prod.id,\n        showCollectionName: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 19\n        }\n      });\n    }\n\n    if (prod.rarity) {\n      return __jsx(React.Fragment, null, __jsx(ProductInfoCard, {\n        product: prod,\n        price: prod.auction ? prod.topBid : prod.primarySalePrice,\n        sold: prod.sold,\n        showRarity: true,\n        showCollectionName: true,\n        isAuction: prod.auction,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }\n      }));\n    }\n  }))));\n};\n\n_s(LandingPage, \"nvFdoTv1kkjSak5G/oXWVQZhvLk=\", false, function () {\n  return [useSelector];\n});\n\n_c = LandingPage;\nexport default LandingPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LandingPage\");","map":{"version":3,"sources":["/Volumes/Data/Work/Digitalax/f3m-marketplace/src/pages/index.js"],"names":["React","useEffect","useState","Router","Head","getAllNFTs","getCollectionGroups","getDigitalaxMarketplaceV2Offers","getNFTById","getSecondaryOrderByContractTokenAndBuyorsell","getSellingNfts","PixelLoader","styles","useSelector","getChainId","Container","Link","ProductInfoCard","Filters","filterOrders","filterProducts","digitalaxApi","getEnabledNetworkByChainId","config","SecondaryInfoCard","LandingPage","chainId","loading","setLoading","products","setProducts","filter","setFilter","secondaryOrders","setSecondaryOrders","sortBy","setSortBy","marketplace","setMarketplace","lookIds","setLookIds","then","x","default","ReactPixel","init","pageView","events","on","shuffle","array","currentIndex","length","randomIndex","Math","floor","random","getOwners","garments","itemSold","users","owners","slice","map","garment","owner","toLowerCase","arranged","Set","user","find","item","wallet","fetchCollectionGroups","digitalaxModelCollectionGroups","digitalaxModelMarketplaceOffers","getAllUsersName","network","nfts","NIX_URL","alias","orders","ords","prods","console","log","forEach","collectionGroup","collections","collection","offer","id","push","designer","model","rarity","startTime","garmentCollection","amountSold","primarySalePrice","sold","parseInt","auction","version","digiBundle","nftData","i","nft","token","tokenId","EIP721_URL","attributes","JSON","parse","metadata","attribute","trait_type","value","designerData","getDesignerById","seller","name","designerId","image","image_url","structuredData","title","description","getOrderForNFT","order","tokenIds","wrapper","loadingWrapper","__html","stringify","homeHeroSection","leftWrapper","subTitle","actionsWrapper","linkWrapper","heroSectionLink","filtersWrapper","collectionsWrapper","sort","a","b","prod","topBid"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Router } from \"next/router\";\nimport Head from \"next/head\";\nimport {\n  getAllNFTs,\n  getCollectionGroups,\n  getDigitalaxMarketplaceV2Offers,\n  getNFTById,\n  getSecondaryOrderByContractTokenAndBuyorsell,\n  getSellingNfts,\n} from \"@services/api/apiService\";\nimport PixelLoader from \"@components/pixel-loader\";\nimport styles from \"./styles.module.scss\";\nimport { useSelector } from \"react-redux\";\nimport { getChainId } from \"@selectors/global.selectors\";\nimport Container from \"@components/container\";\nimport Link from \"next/link\";\nimport ProductInfoCard from \"@components/product-info-card\";\nimport Filters from \"@components/filters\";\nimport { filterOrders, filterProducts } from \"@utils/helpers\";\nimport digitalaxApi from \"@services/api/espa/api.service\";\nimport { getEnabledNetworkByChainId } from \"@services/network.service\";\nimport config from \"@utils/config\";\nimport SecondaryInfoCard from \"@components/secondary-info-card\";\n\nconst LandingPage = () => {\n  const chainId = useSelector(getChainId);\n  const [loading, setLoading] = useState(true);\n  const [products, setProducts] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [secondaryOrders, setSecondaryOrders] = useState([]);\n  const [sortBy, setSortBy] = useState(null);\n  const [marketplace, setMarketplace] = useState(1);\n  const [lookIds, setLookIds] = useState([]);\n\n  useEffect(() => {\n    import(\"react-facebook-pixel\")\n      .then((x) => x.default)\n      .then((ReactPixel) => {\n        ReactPixel.init(\"485692459240447\");\n        ReactPixel.pageView();\n\n        Router.events.on(\"routeChangeComplete\", () => {\n          ReactPixel.pageView();\n        });\n      });\n  }, []);\n\n  const shuffle = (array) => {\n    var currentIndex = array.length,\n      randomIndex;\n\n    // While there remain elements to shuffle...\n    while (currentIndex != 0) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex--;\n\n      // And swap it with the current element.\n      [array[currentIndex], array[randomIndex]] = [\n        array[randomIndex],\n        array[currentIndex],\n      ];\n    }\n\n    return array;\n  };\n\n  const getOwners = (garments, itemSold, users) => {\n    if (!garments) return [];\n    const owners = garments\n      .slice(0, itemSold)\n      .map((garment) => garment.owner.toLowerCase());\n    const arranged = [...new Set(owners)];\n    return arranged.map((garment) => {\n      const user =\n        users.find(\n          (item) => item.wallet && item.wallet.toLowerCase() == garment\n        ) || {};\n      return {\n        ...garment,\n        ...user,\n      };\n    });\n  };\n\n  useEffect(() => {\n    const fetchCollectionGroups = async () => {\n      setLoading(true);\n      const { digitalaxModelCollectionGroups } = await getCollectionGroups(\n        chainId\n      );\n      const { digitalaxModelMarketplaceOffers } =\n        await getDigitalaxMarketplaceV2Offers(chainId);\n      const users = await digitalaxApi.getAllUsersName();\n      const network = getEnabledNetworkByChainId(chainId);\n      const { nfts } = await getAllNFTs(config.NIX_URL[network.alias]);\n      const { orders: ords } = await getSellingNfts(\n        config.NIX_URL[network.alias]\n      );\n\n      setSecondaryOrders(filterOrders(ords));\n      const prods = [];\n\n      console.log({ digitalaxModelCollectionGroups });\n\n      digitalaxModelCollectionGroups.forEach((collectionGroup) => {\n        // if (\n        //   collectionGroup.auctions.length > 1 ||\n        //   (collectionGroup.auctions.length === 1 &&\n        //     collectionGroup.auctions[0].id !== \"0\")\n        // ) {\n        //   collectionGroup.auctions.forEach((auction) => {\n        //     prods.push({\n        //       id: auction.id,\n        //       designer: auction.designer,\n        //       reservePrice: auction.reservePrice,\n        //       topBid: auction.topBid || 0,\n        //       startTime: auction.startTime,\n        //       endTime: auction.endTime,\n        //       garment: auction.garment,\n        //       sold: Date.now() > auction.endTime * 1000,\n        //       rarity: \"Exclusive\",\n        //       auction: true,\n        //       version: 2,\n        //     });\n        //   });\n        // }\n\n        // if (\n        //   collectionGroup.collections.length > 1 ||\n        //   (collectionGroup.collections.length === 1 &&\n        //     collectionGroup.collections[0].id !== \"0\")\n        // ) {\n        console.log({ collectionGroup });\n        if (collectionGroup.collections.length >= 1) {\n          collectionGroup.collections.forEach((collection) => {\n            const offer = digitalaxModelMarketplaceOffers.find(\n              (offer) => offer.id === collection.id\n            );\n            prods.push({\n              id: collection.id,\n              designer: collection.designer,\n              model: collection.model,\n              rarity: collection.rarity,\n              startTime: offer?.startTime,\n              garment: collection.garments[0],\n              owners: getOwners(\n                offer?.garmentCollection.garments,\n                offer?.amountSold,\n                users\n              ),\n              primarySalePrice: offer ? offer.primarySalePrice : 0,\n              sold: collection.garments.length === parseInt(offer?.amountSold),\n              auction: false,\n              version: 2,\n            });\n          });\n        }\n        if (\n          collectionGroup.digiBundle.length > 1 ||\n          (collectionGroup.digiBundle.length === 1 &&\n            collectionGroup.digiBundle[0].id !== \"0\")\n        ) {\n          collectionGroup.digiBundle.forEach((collection) => {\n            const offer = digitalaxModelMarketplaceOffers.find(\n              (offer) => offer.id === collection.id\n            );\n            prods.push({\n              id: collection.id,\n              designer: collection.designer,\n              startTime: offer?.startTime,\n              primarySalePrice: offer ? offer.primarySalePrice : 0,\n              sold: collection.garments.length === parseInt(offer.amountSold),\n              rarity: collection.rarity,\n              garment: collection.garments[0],\n              owners: getOwners(\n                offer?.garmentCollection.garments,\n                offer?.amountSold,\n                users\n              ),\n              auction: false,\n              version: 2,\n            });\n          });\n        }\n      });\n\n      const nftData = [];\n\n      for (let i = 0; i < nfts.length; i += 1) {\n        const nft = nfts[i];\n        const { token } = await getNFTById(\n          `${nft?.token?.id}_${nft?.tokenId}`,\n          config.EIP721_URL[network.alias]\n        );\n        if (!token) continue;\n        const { orders } = await getSecondaryOrderByContractTokenAndBuyorsell(\n          config.NIX_URL[network.alias],\n          nft?.token?.id,\n          [nft?.tokenId],\n          \"Buy\"\n        );\n        const attributes = (JSON.parse(token?.metadata) || {}).attributes;\n        const designer = attributes.find(\n          (attribute) => attribute.trait_type === \"Designer\"\n        )?.value;\n        const designerData =\n          (await digitalaxApi.getDesignerById(\n            designer === \"Kodomodachi\" ? \"Mirth\" : designer\n          )) || [];\n        const seller = users.find(\n          (user) => user.wallet?.toLowerCase() === token?.owner.id\n        );\n\n        nftData.push({\n          ...nft,\n          nftData: {\n            ...token,\n            designer: {\n              name: designerData[0]?.designerId,\n              image: designerData[0]?.image_url,\n            },\n          },\n          user: seller ? seller : {},\n          orders: filterOrders(orders),\n        });\n      }\n\n      setProducts(shuffle([...prods, ...nftData]));\n      setLoading(false);\n    };\n    fetchCollectionGroups();\n  }, []);\n\n  const structuredData = {\n    \"@context\": \"http://schema.org\",\n    \"@type\": \"Skins Landing page\",\n    title: \"Digitalax - Web3 Fashion Economy\",\n    description:\n      \"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \",\n  };\n\n  const getOrderForNFT = (nft) => {\n    return secondaryOrders?.find((order) => {\n      return (\n        order.token.id === nft.token.id && order.tokenIds[0] === nft.tokenId\n      );\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className={styles.wrapper}>\n        <div className={styles.loadingWrapper}>\n          <PixelLoader title={\"loading...\"} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Head>\n        <meta\n          name=\"description\"\n          content=\"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \"\n        />\n        <meta property=\"og:title\" content=\"Digitalax - Web3 Fashion Economy\" />\n        <meta\n          property=\"og:description\"\n          content=\"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \"\n        />\n        <meta property=\"og:url\" content=\"https://marketplace.digitalax.xyz\" />\n        <meta name=\"twitter:card\" content=\"summary\" />\n        <meta name=\"twitter:site\" content=\"@ESPA4play\" />\n        <meta name=\"twitter:title\" content=\"Skins Landing page\" />\n        <meta\n          name=\"twitter:description\"\n          content=\"Take your digital fashion skins to the next level: directly into indie games & mods, where players from amateur to pro can start to earn a livelihood through play, without sacrificing our love of the game. ESPA is the first casual esports platform, with direct integration with DIGITALAX NFT skins on Matic Network. \"\n        />\n        <script src=\"https://cdn.rawgit.com/progers/pathseg/master/pathseg.js\"></script>\n        <script\n          type=\"application/ld+json\"\n          dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }}\n        />\n      </Head>\n      <section className={styles.homeHeroSection}>\n        <div className={styles.leftWrapper}>\n          <h1 className={styles.title}>RUNWAY</h1>\n          <h2 className={styles.subTitle}>MODELS AND LOOKS</h2>\n        </div>\n\n        <div className={styles.actionsWrapper}>\n          <div className={styles.linkWrapper}>\n            <Link href=\"/marketplace\">\n              <a\n                className={styles.heroSectionLink}\n              >{`Primary Marketplace >`}</a>\n            </Link>\n            <Link href=\"/marketplace/secondary\">\n              <a\n                className={styles.heroSectionLink}\n              >{`Secondary Marketplace >`}</a>\n            </Link>\n          </div>\n\n          <div className={styles.filtersWrapper}>\n            <Filters\n              showType\n              setType={(value) => {\n                setMarketplace(parseInt(value));\n              }}\n              filter={filter}\n              filterChange={setFilter}\n              sortByChange={setSortBy}\n            />\n          </div>\n        </div>\n      </section>\n\n      <Container>\n        <section className={styles.collectionsWrapper}>\n          {filterProducts(products, filter, sortBy)\n            .sort((a, b) => {\n              if (a.sold && !b.sold) return 1;\n              if (!a.sold && b.sold) return -1;\n              return 0;\n            })\n            .map((prod) => {\n              if (marketplace === 2 && prod.rarity) return <></>;\n              if (marketplace === 1 && !prod.rarity) return <></>;\n              if (marketplace === 2) {\n                return (\n                  <SecondaryInfoCard\n                    product={prod}\n                    offers={prod.orders}\n                    user={prod.user}\n                    nftData={prod.nftData}\n                    order={getOrderForNFT(prod)}\n                    key={prod.id}\n                    showCollectionName\n                  />\n                );\n              }\n              if (prod.rarity) {\n                return (\n                  <>\n                    <ProductInfoCard\n                      product={prod}\n                      price={prod.auction ? prod.topBid : prod.primarySalePrice}\n                      sold={prod.sold}\n                      showRarity\n                      showCollectionName\n                      isAuction={prod.auction}\n                    />\n                  </>\n                );\n              }\n            })}\n        </section>\n      </Container>\n    </div>\n  );\n};\n\nexport default LandingPage;\n"]},"metadata":{},"sourceType":"module"}